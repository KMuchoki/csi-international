jQuery(function(t){function e(){var t=jQuery(window).scrollTop(),e="no";jQuery(".panel-row-style").each(function(){var o="#"+jQuery(this).attr("id"),n=jQuery(this).offset().top-2,i=jQuery(this).outerHeight(),a=n-w,s=n+i-w;return t>=a&&t<=s?(e="yes",jQuery("#site-navigation .current").removeClass("current"),jQuery('#site-navigation a[href$="'+o+'"]').parent("li").addClass("current"),!1):void("no"===e&&jQuery("#site-navigation .current").removeClass("current"))})}t.fn.polestarIsVisible=function(){var t=this[0].getBoundingClientRect();return t.bottom>=0&&t.right>=0&&t.top<=(window.innerHeight||document.documentElement.clientHeight)&&t.left<=(window.innerWidth||document.documentElement.clientWidth)},t(window).load(function(){t(".entry-thumbnail").each(function(){img=t(this).find("img"),img_width=img.width(),img_height=img.height(),t(this).css({maxWidth:img_width,maxHeight:img_height})})});var o={x:0,y:0};t(document).mousemove(function(t){o={x:t.pageX,y:t.pageY}}),t.fn.polestarBurstAnimation=function(e){var n=t.extend({event:"click",container:"parent"},e);return t(this).each(function(){var e=t(this),i="parent"===n.container?e.parent():e.closest(n.container),a=t('<div class="burst-animation-overlay"></div>'),s=t('<div class="burst-circle"></div>').appendTo(a);e.on(n.event,function(){a.appendTo(i),s.css({top:o.y-i.offset().top,left:o.x-i.offset().left,opacity:.1,scale:1}).transition({opacity:0,scale:i.width()},500,"ease",function(){a.detach()})})})},"undefined"!=typeof t.fn.fitVids&&t(".entry-content, .entry-content .panel, .woocommerce #main").fitVids({ignore:".tableauViz"}),t(window).on("load",function(){t(".flexslider").each(function(){t(this).flexslider({animation:"slide",controlNav:!1,customDirectionNav:t(this).find(".flex-direction-nav a")})})});var n=function(){var e=window.pageYOffset||document.documentElement.scrollTop;e>t("#masthead").outerHeight()?t("#scroll-to-top").hasClass("show")||t("#scroll-to-top").css("pointer-events","auto").addClass("show"):t("#scroll-to-top").hasClass("show")&&t("#scroll-to-top").css("pointer-events","none").removeClass("show")};if(n(),t(window).scroll(n),t("#scroll-to-top").click(function(){t("html, body").animate({scrollTop:0})}),t("#masthead").hasClass("sticky")){var i=!1,a=t("#page").offset().top,s=t("#masthead"),r=t("#topbar"),l=t('#topbar .woocommerce-store-notice[style*="display: none"]'),c=function(){t("body").hasClass("mobile-header-ns")&&t(window).width()<polestar_resp_menu_params.collapse||(i===!1&&(i=t('<div class="masthead-sentinel"></div>').insertAfter(s),i.css("height",s.outerHeight())),t("body").hasClass("no-topbar")||r.polestarIsVisible()||t("body").addClass("topbar-out"),r.length&&t("body").hasClass("topbar-out")&&r.polestarIsVisible()&&t("body").removeClass("topbar-out"),t("body").hasClass("no-topbar")&&!t(window).scrollTop()&&t("body").addClass("topbar-out"),t("body").hasClass("no-topbar")||!t("body").hasClass("no-topbar")&&t("body").hasClass("topbar-out")||l.length?s.css("position","fixed"):t("body").hasClass("no-topbar")||t("body").hasClass("topbar-out")||s.css("position","absolute"))};c(),t(window).resize(c).scroll(c);var d=function(){t(window).scrollTop()>0?t(s).addClass("stuck"):t(s).removeClass("stuck")};d(),t(window).scroll(d);var h={top:parseInt(s.css("padding-top")),bottom:parseInt(s.css("padding-bottom"))};if(s.data("scale-logo")){var u=function(){var t=window.pageYOffset||document.documentElement.scrollTop;t-=a;var e=s.find(".site-branding img"),o=s.find(".site-branding > *");e.removeAttr("style");var n=e.width(),i=e.height();if(t>0){var r=.775+Math.max(0,48-t)/48*(1-.775);e.length?e.css({width:n*r,height:i*r,"max-width":"none"}):o.css("transform","scale("+r+")"),s.css({"padding-top":h.top*r,"padding-bottom":h.bottom*r}).addClass("stuck")}else e.length||o.css("transform","scale(1)"),s.css({"padding-top":h.top,"padding-bottom":h.bottom}).removeClass("stuck")};u(),t(window).scroll(u).resize(u)}}t(".search-field").polestarBurstAnimation({event:"focus",container:".search-form"});var m=t("#header-search");if(t("#masthead .search-icon").click(function(){m.fadeIn("fast"),m.find("form").css("margin-top",-m.find("form").innerHeight()/2),m.find('input[type="search"]').focus().select(),m.find("#close-search").addClass("animate-in")}),m.find("#close-search").click(function(){m.fadeOut(350),t(this).removeClass("animate-in")}),t(window).scroll(function(){m.is(":visible")&&m.find("form").css("margin-top",-m.find("form").outerHeight()/2)}),t(document).keyup(function(e){27==e.keyCode&&t("#close-search.animate-in").trigger("click")}),t("body.no-js").removeClass("no-js"),t("body").hasClass("css3-animations")){t(".search-field").polestarBurstAnimation({event:"focus",container:".search-form"});var f=function(){t(".main-navigation ul ul").each(function(){var e=t(this),o=Math.max.apply(Math,e.find("> li:not(.mini_cart_item) > a").map(function(){return t(this).width()}).get());e.find("> li > a").width(o)})};f(),t(window).resize(f),t(".menu-item").children("a").focus(function(){t(this).parents("ul, li").addClass("focus")}),t(".menu-item").children("a").click(function(){t(this).parents("ul, li").removeClass("focus")}),t(".menu-item").children("a").focusout(function(){t(this).parents("ul, li").removeClass("focus")}),t(".main-navigation ul ul li a").polestarBurstAnimation({event:"click",container:"parent"})}jQuery(document).ready(function(t){window.location.hash||(t('#site-navigation a[href="'+window.location.href+'"]').parent("li").addClass("current-menu-item"),t(window).scroll(function(){t("#site-navigation ul li").hasClass("current")&&t("#site-navigation li").removeClass("current-menu-item")}))});var p=t("#wpadminbar").outerHeight(),g=t("body").hasClass("admin-bar"),v=t("header").hasClass("sticky");if(v&&g&&jQuery(window).width()>600)var w=p+t("header").outerHeight()-2;else if(v)var w=t("header").outerHeight()-2;else var w=0;t.fn.polestarSmoothScroll=function(){t(this).click(function(t){var e=this.hash,o=e.substring(1),n=this;if(jQuery(".panel-grid [id*="+o+"]").length>0?(jQuery("#site-navigation .current").removeClass("current"),jQuery(n).parent("li").addClass("current")):jQuery("#site-navigation .current").removeClass("current"),location.pathname.replace(/^\//,"")==this.pathname.replace(/^\//,"")&&location.hostname==this.hostname){var i=jQuery(this.hash);if(i=i.length?i:jQuery("[name="+this.hash.slice(1)+"]"),i.length)return jQuery("html, body").animate({scrollTop:i.offset().top-w},1200),!1}})},jQuery(window).load(function(){t('#site-navigation a[href*="#"]:not([href="#"]), .comments-link a[href*="#"]:not([href="#"]), .puro-scroll[href*="#"]:not([href="#"])').polestarSmoothScroll()}),jQuery(window).load(function(){if(location.pathname.replace(/^\//,"")==window.location.pathname.replace(/^\//,"")&&location.hostname==window.location.hostname){var e=jQuery(window.location.hash);if(e.length)return t(document).scrollTop(0),jQuery("html, body").animate({scrollTop:e.offset().top-w},1200),!1}}),jQuery(window).on("scroll",e);var b=!1;t("#mobile-menu-button").click(function(e){e.preventDefault();var o=t(this);if(o.toggleClass("to-close"),b===!1){b=t("<div></div>").append(t(".main-navigation ul").first().clone()).attr("id","mobile-navigation").appendTo("#masthead").hide(),t("#header-search form").length&&b.append(t("#header-search form").clone()),t(".main-navigation .shopping-cart").length&&b.append(t(".main-navigation .shopping-cart .shopping-cart-link").clone()),b.find("#primary-menu").show().css("opacity",1),b.find(".menu-item-has-children > a, .page_item_has_children > a").after('<button class="dropdown-toggle" aria-expanded="false"><i class="icon-chevron-down" aria-hidden="true"></i></button>'),b.find(".dropdown-toggle").click(function(e){e.preventDefault(),t(this).toggleClass("toggle-open").next(".children, .sub-menu").slideToggle("fast")});var n=function(){if(t("#masthead").hasClass("sticky")){var e="fixed"===t("#wpadminbar").css("position")?t("#wpadminbar").outerHeight():0,o=t("#masthead").innerHeight(),n=t(window).height()-o-e;t("#mobile-navigation").css("max-height",n)}};n(),t(window).resize(n),t("#mobile-navigation").scroll(n)}b.slideToggle("fast"),t("#mobile-navigation a").click(function(t){b.is(" :visible")&&b.slideUp("fast"),o.removeClass("to-close")}),t('#mobile-navigation a[href*="#"]:not([href="#"])').polestarSmoothScroll()})});